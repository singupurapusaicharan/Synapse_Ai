# ============================================================================
# SYNAPSE AI - ENVIRONMENT CONFIGURATION
# ============================================================================
# SECURITY: Never commit this file with real values to version control!
# Copy this file to .env and fill in your actual values.
# ============================================================================

# ============================================================================
# CRITICAL SECURITY VARIABLES
# ============================================================================

# JWT Secret - Used to sign authentication tokens
# SECURITY: Must be a strong random string (32+ characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-strong-random-secret-here-min-32-chars

# Encryption Key - Used to encrypt sensitive data
# SECURITY: Must be a strong random string (32+ characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-strong-random-encryption-key-here-min-32-chars

# JWT Token Expiration (optional, default: 7d)
JWT_EXPIRES_IN=7d

# ============================================================================
# DATABASE CONFIGURATION (Supabase)
# ============================================================================

# Supabase Project URL
# Format: https://your-project-ref.supabase.co
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase Service Role Key
# SECURITY: This is a sensitive key with full database access
# Find in: Supabase Dashboard → Settings → API → service_role key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Supabase Database Connection String
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
# Find in: Supabase Dashboard → Settings → Database → Connection String
SUPABASE_DB_URL=postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server Port
PORT=3001

# Node Environment (development, production, test)
NODE_ENV=development

# Frontend URL (for CORS and OAuth callbacks)
# Development: http://localhost:8080
# Production: https://your-frontend-domain.com
FRONTEND_URL=http://localhost:8080

# Backend URL (for OAuth callbacks)
# Development: http://localhost:3001
# Production: https://your-backend-domain.com
BACKEND_URL=http://localhost:3001

# ============================================================================
# GOOGLE OAUTH CONFIGURATION
# ============================================================================

# Google OAuth Client ID
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# Google OAuth Client Secret
# SECURITY: This is a sensitive credential
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ============================================================================
# EMAIL CONFIGURATION (Optional - for password reset)
# ============================================================================

# Email Provider (gmail, smtp, etc.)
EMAIL_PROVIDER=gmail

# Email Username
EMAIL_USER=your-email@gmail.com

# Email Password or App Password
# SECURITY: For Gmail, use App Password (not your account password)
# Generate at: https://myaccount.google.com/apppasswords
EMAIL_PASSWORD=your-16-char-app-password

# Email From Address
EMAIL_FROM=your-email@gmail.com

# ============================================================================
# AI/ML CONFIGURATION (Optional)
# ============================================================================

# Hugging Face API Key (optional - for higher rate limits on embeddings)
# Get from: https://huggingface.co/settings/tokens
# SECURITY: Keep this secret
HUGGINGFACE_API_KEY=your-huggingface-api-key

# Ollama Configuration (optional - for local LLM)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_CHAT_MODEL=mistral
OLLAMA_CHAT_FALLBACK_MODEL=phi
OLLAMA_TIMEOUT=30000

# ============================================================================
# HIGH CONCURRENCY CONFIGURATION (1000+ Users)
# ============================================================================

# Database Connection Pool (automatically configured)
# Default: 100 max connections, 10 min connections
# Optimized for handling 1000+ concurrent users
# Note: Supabase free tier may limit connections - upgrade for production

# Request Queue Configuration (automatically configured)
# Max queue size: 500 requests
# Max wait time: 30 seconds
# Automatically queues requests when system is under high load

# Rate Limiting (automatically configured)
# API: 120 requests/minute per user
# Chat: 20 messages/minute per user
# Sync: 5 syncs per 5 minutes per user
# Optimized for high concurrency while preventing abuse

# ============================================================================
# SECURITY NOTES
# ============================================================================
#
# 1. NEVER commit .env file to version control
# 2. Use strong, random values for JWT_SECRET and ENCRYPTION_KEY
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use different secrets for development, staging, and production
# 5. Limit access to production environment variables
# 6. Use a secret management service in production (AWS Secrets Manager, etc.)
# 7. Enable HTTPS in production (required for OAuth and security)
# 8. Review and update CORS settings for production
#
# ============================================================================
# GENERATING SECURE SECRETS
# ============================================================================
#
# Run these commands to generate secure random strings:
#
# JWT_SECRET:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# ENCRYPTION_KEY:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# ============================================================================
